{"version":3,"sources":["Components/ImageGalleryItem/ImageGalleryItem.module.css","Components/Modal/Modal.module.css","App.module.css","Components/ImageGallery/ImageGallery.module.css","Components/LoadButton/LoadButton.module.css","Components/ImageGalleryItem/ImageGalleryItem.jsx","Components/ImageGallery/ImageGallery.jsx","Components/SearchBar/SearchBar.jsx","Components/Modal/Modal.jsx","Components/LoadButton/LoadButton.jsx","App.js","index.js","Components/SearchBar/SearchBar.module.css"],"names":["module","exports","ImageGalleryItem","webformatURL","tags","onToggleModal","largeImageURL","className","s","onClick","src","alt","ImageGalleryItem_image","ImageGallery","images","this","props","map","id","Component","SearchBar","state","query","handleSearch","e","setState","currentTarget","value","handleSubmit","preventDefault","onSubmit","Searchbar","SearchForm","type","SearchForm_button","SearchForm_button_label","SearchForm_input","autoComplete","autoFocus","placeholder","onChange","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleClickOnOverlay","target","console","log","window","addEventListener","removeEventListener","createPortal","Overlay","LoadButton","onFetchImages","load_btn","App","showModal","page","searchQuery","isLoading","error","modalImage","onChangeQuery","fetchImages","axios","get","then","res","prevState","data","hits","catch","finally","toggleModal","prevProps","length","color","height","width","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.adac34df.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__FUoNK\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__1Ey-E\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3hN7B\",\"Modal\":\"Modal_Modal__1REdh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3djQr\",\"App-logo\":\"App_App-logo__22uks\",\"App-logo-spin\":\"App_App-logo-spin__3e47D\",\"App-header\":\"App_App-header__j-tRn\",\"App-link\":\"App_App-link___rfZY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1AvE9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"load_btn\":\"LoadButton_load_btn__dsqGG\"};","import s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({\n  webformatURL,\n  tags,\n  onToggleModal,\n  largeImageURL,\n}) => {\n  return (\n    <li className={s.ImageGalleryItem} onClick={onToggleModal}>\n      <img\n        src={webformatURL}\n        alt={`${tags}`}\n        className={s.ImageGalleryItem_image}\n      />\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n","import React, { Component } from 'react';\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nclass ImageGallery extends Component {\n  render() {\n    const images = this.props.images;\n    return (\n      <ul className={s.ImageGallery}>\n        {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n          <ImageGalleryItem\n            key={id}\n            webformatURL={webformatURL}\n            tags={tags}\n            largeImageURL={largeImageURL}\n            onToggleModal={this.props.onToggleModal}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport s from './SearchBar.module.css';\n\nclass SearchBar extends Component {\n  state = {\n    query: '',\n  };\n\n  // изменение значения инпута\n  handleSearch = e => {\n    this.setState({ query: e.currentTarget.value });\n  };\n\n  // сабмит формы\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.query);\n\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchForm_button}>\n            <span className={s.SearchForm_button_label}></span>\n          </button>\n\n          <input\n            className={s.SearchForm_input}\n            value={this.state.query}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleSearch}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default SearchBar;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    //   при монтировании вешаем слушатель\n    console.log('Modal componentDidMount');\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  // снимаем слушаетель при размонтировании\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  // закрытие нажатием ESC\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  // закрытие нажатием на оверлей\n  handleClickOnOverlay = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleClickOnOverlay}>\n        <div className={s.Modal}></div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import s from './LoadButton.module.css';\n\nconst LoadButton = ({ onFetchImages }) => {\n  return (\n    <button className={s.load_btn} onClick={onFetchImages}>\n      Load more\n    </button>\n  );\n};\n\nexport default LoadButton;\n","import { Component } from 'react';\nimport axios from 'axios';\nimport Loader from 'react-loader-spinner';\nimport s from './App.module.css';\nimport ImageGallery from './Components/ImageGallery';\nimport SearchBar from './Components/SearchBar';\nimport Modal from './Components/Modal';\nimport LoadButton from './Components/LoadButton';\n\nclass App extends Component {\n  state = {\n    showModal: false,\n    images: [],\n    page: 1,\n    searchQuery: '',\n    isLoading: false,\n    error: null,\n    modalImage: '',\n  };\n\n  // запрос на API нужно сделать когда state (у нас searchQuery) обновился и не равен предідущему\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n  }\n\n  onChangeQuery = query => {\n    // при сабмите сохраняем значение инпута query в searchQuery\n    // при сабмите сбрасываем значение page и очищаем результаты предыдущего поиска\n    this.setState({ searchQuery: query, page: 1, images: [], error: null });\n  };\n\n  //запрс на API согласно ключевому слову в строке поиска вызывается при сабмите и при нажатии loadMore\n  fetchImages = () => {\n    const { searchQuery, page } = this.state;\n    const key = '16825213-7fb8f93f8fb61dc742d5122ac';\n\n    this.setState({ isLoading: true });\n\n    axios\n      .get(\n        `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=${key}&image_type=photo&orientation=horizontal&per_page=12`,\n      )\n      .then(res => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...res.data.hits],\n          page: prevState.page + 1,\n        }));\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  // открываем/закрываем модалку\n  toggleModal = () => {\n    this.setState(prevState => ({\n      showModal: !prevState.showModal,\n    }));\n  };\n\n  render() {\n    const { images, isLoading, showModal, error } = this.state;\n\n    return (\n      <div className={s.App}>\n        <SearchBar onSubmit={this.onChangeQuery} />\n\n        {error && <p>Oops! Something went wrong...</p>}\n\n        <ImageGallery images={images} onToggleModal={this.toggleModal} />\n\n        {showModal && <Modal onClose={this.toggleModal}></Modal>}\n\n        {images.length > 0 && !isLoading && (\n          <LoadButton onFetchImages={this.fetchImages} />\n        )}\n\n        {isLoading && (\n          <Loader\n            type=\"Puff\"\n            color=\"#00BFFF\"\n            height={100}\n            width={100}\n            timeout={3000}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__9xHHq\",\"SearchForm\":\"SearchBar_SearchForm__2sR_v\",\"SearchForm_button\":\"SearchBar_SearchForm_button__3KlH8\",\"SearchForm_button-label\":\"SearchBar_SearchForm_button-label__1k9S2\",\"SearchForm_input\":\"SearchBar_SearchForm_input__1g_HX\"};"],"sourceRoot":""}